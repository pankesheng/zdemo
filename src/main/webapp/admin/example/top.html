<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title></title>
    <link rel="stylesheet" href="../stylesheets/common.css" />
    <link rel="stylesheet" href="../stylesheets/index.css" />
</head>
<body>
    <div class="header clearfix">
        <!-- 旧版菜单 -->
        <!-- <div class="function-block">
            <p class="function-list">
                <i class="icon"></i>
                <a class="help" href="#">帮助</a>
                <a class="split" href="./container.html?go=mod_user" target="contentFrame">修改密码</a>
                <a class="split" href="/layout/content" target="contentFrame">首页</a>
                <a class="split" href="/user/logout" target="_parent">退出</a>
            </p>
            <p class="user">
                <i class="icon"></i>
                <span class="user-name">测试管理</span>
            </p>
        </div> -->
        <div class="function-block action-block">
            <ul class="action-list">
                <li class="action-item">
                    <div class="action-user-nums">99+</div>
                    <span>在线人数<span class="mini-user-nums">99+</span></span>
                </li>
                <li class="action-item" id="btn-show-user-list">
                    <div class="action-user"></div>
                    <span class="action-more-icon">黄小鸭</span>
                </li>
                <li class="action-item" id="btn-show-more-list">
                    <div class="action-more"></div>
                    <span class="action-more-icon">更多</span>
                </li>
            </ul>
        </div>
        <h1 class="web-title">后台管理系统示例</h1>
        <div class="icon-bar clearfix" id="iconBar">
            <div class="icon-list">
                <ul class="icon-ul"></ul>
            </div>
            <div class="next-list">
                <a href="javascript:void(0);" class="next-btn" id="next-btn"></a>
                <ul class="dots-list clearfix"></ul>
                <div class="nums-list">
                    <span class="cur-page">1</span>
                    <span>/</span>
                    <span class="total-page">4</span>
                </div>
            </div>
        </div>
        <div class="mini-list" id="mini-list"></div>
    </div>
    <ul class="top-list hide" id="user-top-list">
        <li class="top-list-item">
            <a href="##">你好，黄小鸭</a>
        </li>
        <li class="top-list-item">
            <i class="iconfont">&#xe641;</i>
            <a href="##">修改密码</a>
        </li>
        <li class="top-list-item">
            <i class="iconfont">&#xe642;</i>
            <a href="##">退出登录</a>
        </li>
    </ul>
    <ul class="top-list hide" id="user-more-list">
        <li class="top-list-item">
            <i class="iconfont">&#xe645;</i>
            <a href="##">版本更新</a>
        </li>
        <li class="top-list-item">
            <i class="iconfont">&#xe604;</i>
            <a href="##">问题反馈</a>
        </li>
        <li class="top-list-item">
            <i class="iconfont">&#xe646;</i>
            <a href="##">帮助中心</a>
        </li>
    </ul>
    <script type="text/javascript" src="../ext/jquery/jquery-1.8.1.min.js"></script>
    <!--[if lt IE 8]>
    <script type="text/javascript" src="../ext/jquery/jquery.pngFix.js"></script>
    <script>
        //修复IE6 PNG
        var fixpng = function(){
            $(document).pngFix();
        };
    </script>
    <![endif]-->
    <script type="text/javascript" src="../javascripts/jquery-zwbam.js"></script>
    <script>
        /*顶部框架暴露对象*/
        var Header = {
            //当前模式
            mode: 'normal',
            /*顶部迷你模式*/
            switchingMode: function(){
                if(this.mode === 'normal'){
                    switchingMiniMode.call(this);
                }else if(this.mode === 'mini'){
                    switchingNormalMode.call(this);
                }
            },
            /*根据标题设置图标*/
            setTopMenu:function(title){
                 $.fn.zwbam('setTopMenu',title);
            },
            /*获取当前选择的右框架链接*/
            getSelectedUrl:function(){
                return $.fn.zwbam('getCurrentSelectedTopMenuUrl');
            }
        };
        var isListShow = false;

        $(function(){
            if(window.parent.$('.top').height() === 35){
                Header.switchingMode();
            }
            //弹出
            $('#btn-show-user-list').click(function(){
                if(isListShow){
                    removeTopList();
                    isListShow = false;
                }else{
                    showTopList.apply(this, [$('#user-top-list')])
                    isListShow = true;
                }
            });
            $('#btn-show-more-list').click(function(){
                if(isListShow){
                    removeTopList();
                    isListShow = false;
                }else{
                    showTopList.apply(this, [$('#user-more-list')])
                    isListShow = true;
                }
            });
            
            $('#iconBar').zwbam('initTopMenu', {
                "s": 1,
                "callback": function(){
                    $.fn.zwbam('setTopMenu', '首页');
                },
                "d": [{
                    title: '首页',
                    imgUrl: '../images/icon/icon-index.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '智课',
                    imgUrl: '../images/icon/icon1.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '主平台',
                    imgUrl: '../images/icon/icon2.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '评比',
                    imgUrl: '../images/icon/icon3.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '评价',
                    imgUrl: '../images/icon/icon4.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '信息',
                    imgUrl: '../images/icon/icon5.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '应用中心',
                    imgUrl: '../images/icon/icon6.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '信息',
                    imgUrl: '../images/icon/icon5.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '应用中心',
                    imgUrl: '../images/icon/icon6.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '信息',
                    imgUrl: '../images/icon/icon5.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '应用中心',
                    imgUrl: '../images/icon/icon6.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '信息',
                    imgUrl: '../images/icon/icon5.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '应用中心',
                    imgUrl: '../images/icon/icon6.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '信息',
                    imgUrl: '../images/icon/icon5.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '应用中心',
                    imgUrl: '../images/icon/icon6.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '信息',
                    imgUrl: '../images/icon/icon5.png',
                    url: 'http://cn.engadget.com'
                },{
                    title: '应用中心',
                    imgUrl: '../images/icon/icon6.png',
                    url: 'http://cn.engadget.com'
                }]
            });
        });
        function showTopList($clone){
            var $this = $(this);
            var offset = $this.offset();
            var $clone = $clone.clone();
            var $arrow = $('<div class="top-list-arrow"></div>');
            var $body = window.parent.$('body');

            $clone.css({
                position: 'absolute',
                top: offset.top + $this.height() + 8,
                right: $('body').width() - offset.left - $this.width() - 10
            }).show();
            $arrow.css({
                position: 'absolute',
                top: offset.top + $this.height() + 3,
                right: $('body').width() - offset.left - $this.width()
            });
            $body.find('.top-list-arrow').remove().end()
                .find('.top-list').remove().end()
                .append($clone).append($arrow);
        }
        function removeTopList(){
            window.parent.$('body').find('.top-list-arrow').remove().end()
                .find('.top-list').remove();
        }
        function switchingMiniMode(){
            this.mode = 'mini';
            $('.function-block').addClass('mini');
            $('.web-title').addClass('mini-title');
            $('.mini-list').show();
            $('.logo').add('.icon-bar').hide();
            window.parent.$('.top').height(35);
        }
        function switchingNormalMode(){
            this.mode = 'normal';
            $('.function-block').removeClass('mini');
            $('.web-title').removeClass('mini-title');
            $('.mini-list').hide();
            $('.logo').add('.icon-bar').show();
            window.parent.$('.top').height(88);
        }
    </script>
</body>
</html>