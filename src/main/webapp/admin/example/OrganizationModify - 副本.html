<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta charset="UTF-8">
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<title></title>
	<link rel="stylesheet" href="../stylesheets/common.css" />
	<link rel="stylesheet" href="../stylesheets/table.css" />

	<style>
		#treeList {
			background-color: pink;
			position: relative;
			width: 300px;
			height: 300px;
		}
		
		.ztree li ul {
			padding: 0px!important;
		}
		
		#treeList ul:after {
			content: ".";
			display: block;
			height: 0;
			visibility: hidden;
			clear: both;
		}
		
		#treeList li li {
			float: left;
		}
		
		#treeList li li ul {
			position: absolute;
			display: block;
			background-color: #fff;
			left: 0px;
			top: 0px;
			width: 100%;
			height: 100%;
		}
	</style>
</head>

<body>

	<div class="body-warp">
		<div class="panel">

			<div class="panel-body">
				<form>
					<table class="form-table">
						<tr>
							<td>
								<label class="form-label" for="org-type">上级单位<b class="red">*</b></label>
							</td>
							<td>
								<select class="form-select" id="org-type">
									<option value="">请选择条件</option>
									<option>按名称</option>
									<option>按身份</option>
									<option>按时间</option>
								</select>
								<div id="selectfather">选择父单位</div>
								<div id="category" class="">
									<div class="form-wrap">
										<ul id="treeList" class="ztree  panel p-10">
										</ul>
									</div>
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<label class="form-label" for="select-parent">上级单位<b class="red">*</b></label>
							</td>
							<td>
								<input class="form-control" id="select-parent" type="text" value="" data-check="must" />
							</td>
						</tr>
						<tr>
							<td>
								<label class="form-label" for="org-type">单位类别<b class="red">*</b></label>
							</td>
							<td>
								<select class="form-select" id="org-type">
									<option value="">请选择条件</option>
									<option>按名称</option>
									<option>按身份</option>
									<option>按时间</option>
								</select>
							</td>
						</tr>
						<tr>
							<td>
								<label class="form-label" for="org-type">二级分类<b class="red">*</b></label>
							</td>
							<td>
								<div id="cxselect">
									<select class=" level01" disabled="disabled" data-first-title="选择区县"></select>
									<select class=" level02" disabled="disabled" data-first-title="选择区"></select>
									<select class=" level03" disabled="disabled" data-first-title="选择县"></select>
								</div>
							</td>
						</tr>
						<tr>
							<td>
								<label class="form-label" for="org-type">办学性质</label>
							</td>
							<td>
								<select class="form-select" id="org-type">
									<option value="">请选择条件</option>
									<option>按名称</option>
									<option>按身份</option>
									<option>按时间</option>
								</select>
							</td>
						</tr>


						<tr>
							<td>
								<label class="form-label">&nbsp;</label>
							</td>
							<td>
								<input class="btn btn-success btn-large" type="submit" value="保存">
								<input class="btn btn-danger btn-large" type="reset" value="重置">
							</td>
						</tr>
					</table>
				</form>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="../ext/jquery/jquery-1.8.1.min.js"></script>
	<script type="text/javascript" src="../ext/jquery/selectbox.js"></script>

	<script type="text/javascript" src="../ext/zw/check.js"></script>
	<script type="text/javascript" src="../ext/cxselect/jquery.cxselect.js"></script>
	<script type="text/javascript" src="../ext/zTree/js/jquery.ztree.core-3.5.min.js"></script>
	<script type="text/javascript" src="../ext/zTree/js/jquery.ztree.excheck-3.5.min.js"></script>
	<link rel="stylesheet" href="../ext/zTree/css/zTreeStyle/zTreeStyle.css" type="text/css">

	<script type="text/javascript" src="../ext/layer/layer.min.js"></script>
	<script type="text/javascript" src="../javascripts/tool.js"></script>
	<script type="text/javascript" src="../ext/zw/popupselectbox.js"></script>
	<script>
		$(function () {

			/* 初始化控件 */
			initWidget();
			//初始化树（树的初始化要放在最后）
			initTree();
			/*侦听*/
			addListeners();

		});

		/*初始化树*/
		function initTree() {

			//初始化树
			var setting = {
				view: {
					dblClickExpand: false,
					showLine: false,
					selectedMulti: false,
					showIcon: false
				},
				check: {
					enable: true
				},
				//菜单点击事件
				callback: {
					/*	beforeClick: function (treeId, treeNode) {
							var zTree = $.fn.zTree.getZTreeObj(treeId);
							if (treeNode.isParent) {
								zTree.expandNode(treeNode);
								return false;
							} else {
								demoIframe.attr("src", treeNode.file + ".html");
								return true;
							}
						},*/
					onExpand: function (event, treeId, treeNode) {
						console.log(treeNode.tId + ", " + treeNode.name);

						var context = $("#" + treeNode.tId).children("ul");
						var $hided = $("<span class='hided'>返回</span>")
						context.append($hided);
						$hided.bind("click", function () {
							context.remove();
							//折叠上级
						})
					}


				},
			};

			var zNodes = [
				{
					name: "所有字典",
					open: true,
					children: [
						{
							name: "单位锭虹夺三基类型",
							children: [
								{
									name: "叶子基震点12震点12震点12震点",
									children: [
										{
											name: "叶子节点苦角苦基无苦角苦基无苦角苦基无苦角苦基无苦角苦基无可奈何无可奈何无可奈何无可奈何节震左"
										},
										{
											name: "叶子节点122"
										},
										{
											name: "叶子节点123"
										},
										{
											name: "叶子节点124"
										}
						]
								},
								{
									name: "叶子节点122"
								},
								{
									name: "叶子节点123"
								},
								{
									name: "叶子节点124"
								}
						]

						},
						{
							name: "办学性质",

						},
						{
							name: "性别",
						},
				]
				}, {
					name: "所有字典",
					open: true,
					children: [
						{
							name: "单位锭虹夺三基类型",
							children: [
								{
									name: "叶子基震点12震点12震点12震点",
									children: [
										{
											name: "叶子节点苦角苦基无苦角苦基无苦角苦基无苦角苦基无苦角苦基无可奈何无可奈何无可奈何无可奈何节震左"
										},
										{
											name: "叶子节点122"
										},
										{
											name: "叶子节点123"
										},
										{
											name: "叶子节点124"
										}
						]
								},
								{
									name: "叶子节点122"
								},
								{
									name: "叶子节点123"
								},
								{
									name: "叶子节点124"
								}
						]

						},
						{
							name: "办学性质",

						},
						{
							name: "性别",
						},
				]
				},
		];
			//全局性树列，默认使用id名为#treeList；树内容区默认使用ID名使用#treeContent，两者绑定，折叠展开树列时，树内容自适应窗口布局
			//当一个页面出现多个树列时，其他树列使用非#treeList名称，如果*还想*绑定树内容自适应窗口，请在setting里的view里绑定treeContentId的ID名称
			//
			/*
						var treeObj = $("#treeList").createTree(setting, zNodes);
			*/
			var t = $("#treeList");
			t = $.fn.zTree.init(t, setting, zNodes);
			//选中第一个子树
			//treeObj.selectNode(treeObj.getNodes()[0].children[0]);

		}


		/*初始化控件*/
		function initWidget() {

			var cxSelectSetting = {
				//url:'js/cityData.min.json',
				selects: ['level01', 'level02', 'level03'],
				nodata: 'none',
				url: [
					{
						'v': '1',
						'n': '第一级 >',
						's': [
							{
								'v': '2',
								'n': '第二级 >',
								's': [
									{
										'v': '3',
										'n': '第三级 >',
										's': [
											{
												'v': '4',
												'n': '第四级 >',
												's': [
													{
														'v': '5',
														'n': '第五级 >',
														's': [
															{
																'v': '6',
																'n': '第六级 >'
															}
            ]
													}
          ]
											}
        ]
									}
      ]
							}
    ]
					},
					{
						'v': 'test number',
						'n': '测试数字',
						's': [
							{
								'v': 'text',
								'n': '文本类型',
								's': [
									{
										'v': '4',
										'n': '4'
									},
									{
										'v': '5',
										'n': '5'
									},
									{
										'v': '6',
										'n': '6'
									},
									{
										'v': '7',
										'n': '7'
									},
									{
										'v': '8',
										'n': '8'
									},
									{
										'v': '9',
										'n': '9'
									},
									{
										'v': '10',
										'n': '10'
									}
      ]
							},
							{
								'v': 'number',
								'n': '数值类型',
								's': [
									{
										'v': 11,
										'n': 11
									},
									{
										'v': 12,
										'n': 12
									},
									{
										'v': 13,
										'n': 13
									},
									{
										'v': 14,
										'n': 14
									},
									{
										'v': 15,
										'n': 15
									},
									{
										'v': 16,
										'n': 16
									},
									{
										'v': 17,
										'n': 17
									}
      ]
							}
    ]
					},
					{
						'v': 'test boolean',
						'n': '测试 Boolean 类型',
						's': [
							{
								'v': true,
								'n': true
							},
							{
								'v': false,
								'n': false
							}
    ]
					},
					{
						v: 'test quotes',
						n: '测试属性不加引号',
						s: [
							{
								v: 'quotes',
								n: '引号'
							}
    ]
					},
					{
						v: 'test other',
						n: '测试奇怪的值',
						s: [
							{
								v: '[]',
								n: '数组（空）'
							},
							{
								v: [1, 2, 3],
								n: '数组（数值）'
							},
							{
								v: ['a', 'b', 'c'],
								n: '数组（文字）'
							},
							{
								v: new Date(),
								n: '日期'
							},
							{
								v: new RegExp('\\d+'),
								n: '正则对象'
							},
							{
								v: /\d+/,
								n: '正则直接量'
							},
							{
								v: {},
								n: '对象'
							},
							{
								v: document.getElementById('custom_data'),
								n: 'DOM'
							},
							{
								v: null,
								n: 'Null'
							},
							{
								n: '未设置 value'
							}
    ]
					},
					{
						'v': '',
						'n': '无子级'
					}
  ],
			}

			//初始化级联下拉菜单
			$('#cxselect').cxSelect(cxSelectSetting);

			//初始化独立下拉菜单
			$('.form-select').each(function (index, el) {
				selectbox(this);
			});
		}

		function addListeners() {
			$("#selectfather").click(function () {
				console.log("good")
				showDom('组织管理', '#category', 600, 400);
			})
		}
	</script>
</body>

</html>